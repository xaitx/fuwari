---
title: "通过子站获取某某wp站点后台"
published: 2021-11-08
description: ""
category: 胡乱折腾
tags: 
  - "sql"
---

今天原本逛博客时候找到一个写了好几个开源程序的博客，正好感兴趣的点进去看了看。

然后发现他这几个子站全是二级目录(⊙﹏⊙)然后就好奇的看了哈存在注入

二级站点嘶，盲猜数据库共享，然后直接拿着是了哈，果然不出所料。然后就试了试

可以直接查询数据表内容。

毕竟新手sql语句不太熟悉记录下

group\_concat函数可以将多组字符串拼接一起查询多列表多值组合使用

但是最后我发现mysqli\_query()无法堆叠注入，然后我知道union可以联合查询但是查询到了账号密码也没用。密码是加密过的，所以只能添加一个新的管理员，但是这又不懂如何插入只得放弃。（以后看看）

然后又看向了其他站，其中一个是人脸微笑识别，那么上传图片时候可能存在，查看代码

```
if ((($_FILES["file"]["type"] == "image/png")
        || ($_FILES["file"]["type"] == "image/jpeg")
        || ($_FILES["file"]["type"] == "image/jpg")
        || ($_FILES["file"]["type"] == "image/pjpeg")
        || ($_FILES["file"]["type"] == "image/bmp")
        || ($_FILES["file"]["type"] == "image/gif"))
    && ($_FILES["file"]["size"] < 50000000))
```

很明显这个判断可以直接绕过。直接抓包改下文件头就行了，直接上传一句话，然后成功连接上了。但是又捣鼓了看看。最后还是仅限制与后台管理员

wp直接在数据库添加管理员需要插入三条记录

具体的丢个链接吧

Biu~
